fileFormatVersion: 2
guid: c93fadd45f3967c4bb295611c352696d
importerOverride: ZEPETO.Script.Compiler:ZEPETO.Script:TypescriptAssetImporter
ScriptedImporter:
  internalIDToNameTable: []
  externalObjects: {}
  serializedVersion: 2
  userData: 
  assetBundleName: 
  assetBundleVariant: 
  script: {fileID: -1123457745, guid: 54cf806323ffe4418a4ce4cc63fe6b9d, type: 3}
  isAssemblyDeclarations: 0
  assembly: 
  generateAllTypes: 1
  types: []
  generateWrapper: 0
  overrideWrapperTypes: 0
  wrapperTypes: []
  WrapperFilters: []
  wrapperOutputDirectory: Generated
  compiledResult: '{"source":"\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\",
    { value: true });\r\nconst UnityEngine_1 = require(\"UnityEngine\");\r\nconst
    UnityEngine_UI_1 = require(\"UnityEngine.UI\");\r\nconst ZEPETO_Character_Controller_1
    = require(\"ZEPETO.Character.Controller\");\r\nconst ZEPETO_Multiplay_1 = require(\"ZEPETO.Multiplay\");\r\nconst
    ZEPETO_Script_1 = require(\"ZEPETO.Script\");\r\nconst ZepetoGameCharacter_1
    = require(\"./ZepetoGameCharacter\");\r\nconst KillLogPanel_1 = require(\"./KillLogPanel\");\r\nconst
    ClientStarterV2_1 = require(\"./ClientStarterV2\");\r\nvar MotionIndex;\r\n(function
    (MotionIndex) {\r\n    MotionIndex[MotionIndex[\"Punch\"] = 0] = \"Punch\";\r\n   
    MotionIndex[MotionIndex[\"Defense\"] = 1] = \"Defense\";\r\n    MotionIndex[MotionIndex[\"Die\"]
    = 2] = \"Die\";\r\n})(MotionIndex || (MotionIndex = {}));\r\nclass GameManager
    extends ZEPETO_Script_1.ZepetoScriptBehaviour {\r\n    constructor() {\r\n       
    super(...arguments);\r\n        this._punchCool = 5;\r\n        this._defenseCool
    = 5;\r\n        this._MESSAGE = {\r\n            OnPlayGesture: \"OnPlayGesture\",\r\n           
    OnHitPlayer: \"OnHitPlayer\",\r\n            OnEndGame: \"OnEndGame\",\r\n       
    };\r\n    }\r\n    Start() {\r\n        ZEPETO_Character_Controller_1.ZepetoPlayers.instance.OnAddedLocalPlayer.AddListener(()
    => {\r\n            this.room = ClientStarterV2_1.default.instance.room;\r\n           
    this._myCharacter = ZEPETO_Character_Controller_1.ZepetoPlayers.instance.LocalPlayer.zepetoPlayer.character;\r\n           
    this._punchBtn = UnityEngine_1.GameObject.Find(\"PunchBtn\").GetComponent($typeof(UnityEngine_UI_1.Button));\r\n           
    this._punchBtn.onClick.AddListener(() => {\r\n                this.StartCoroutine(this.Punch());\r\n           
    });\r\n            this._defenseBtn = UnityEngine_1.GameObject.Find(\"DefenseBtn\").GetComponent($typeof(UnityEngine_UI_1.Button));\r\n           
    this._defenseBtn.onClick.AddListener(() => {\r\n                this.StartCoroutine(this.Defense());\r\n           
    });\r\n            this.room.AddMessageHandler(this._MESSAGE.OnPlayGesture, (message)
    => {\r\n                this.StartCoroutine(this.GestureSync(message));\r\n           
    });\r\n            this.room.AddMessageHandler(this._MESSAGE.OnHitPlayer, (message)
    => {\r\n                this.KillLog(message);\r\n            });\r\n           
    this.room.AddMessageHandler(this._MESSAGE.OnEndGame, (message) => {\r\n               
    this.StopAllCoroutines();\r\n                //End Game\r\n            });\r\n       
    });\r\n        this._killLogPanel = UnityEngine_1.GameObject.Find(\"KillLogPanel\").GetComponent($typeof(KillLogPanel_1.default));\r\n   
    }\r\n    *Punch() {\r\n        if (!this._punchFlag) {\r\n            this._punchFlag
    = true;\r\n            this.room.Send(this._MESSAGE.OnPlayGesture, MotionIndex.Punch);\r\n           
    yield new UnityEngine_1.WaitForSeconds(this._punchCool);\r\n            this._punchFlag
    = false;\r\n        }\r\n    }\r\n    *Defense() {\r\n        if (!this._defenseFlag)
    {\r\n            this._defenseFlag = true;\r\n            this.room.Send(this._MESSAGE.OnPlayGesture,
    MotionIndex.Defense);\r\n            yield new UnityEngine_1.WaitForSeconds(this._defenseCool);\r\n           
    this._defenseFlag = false;\r\n        }\r\n    }\r\n    Kill(attacker, victim)
    {\r\n        if (this.room.SessionId == attacker.GetComponent($typeof(ZepetoGameCharacter_1.default)).sessionID)
    {\r\n            const data = new ZEPETO_Multiplay_1.RoomData();\r\n           
    data.Add(\"attackerSessionId\", attacker.GetComponent($typeof(ZepetoGameCharacter_1.default)).sessionID);\r\n           
    data.Add(\"attackerNickname\", attacker.GetComponent($typeof(ZepetoGameCharacter_1.default)).nickname);\r\n           
    data.Add(\"victimSessionId\", victim.GetComponent($typeof(ZepetoGameCharacter_1.default)).sessionID);\r\n           
    data.Add(\"victimNickname\", victim.GetComponent($typeof(ZepetoGameCharacter_1.default)).nickname);\r\n           
    data.Add(\"victimTag\", victim.tag);\r\n            this.room.Send(this._MESSAGE.OnHitPlayer,
    data.GetObject());\r\n        }\r\n    }\r\n    *GestureSync(playerGestureInfo)
    {\r\n        const zepetoPlayer = ZEPETO_Character_Controller_1.ZepetoPlayers.instance.GetPlayer(playerGestureInfo.sessionId);\r\n       
    if (playerGestureInfo.gestureIndex == MotionIndex.Punch) {\r\n            zepetoPlayer.character.SetGesture(this._punchGesture);\r\n           
    yield new UnityEngine_1.WaitForSeconds(2);\r\n        }\r\n        else if (playerGestureInfo.gestureIndex
    == MotionIndex.Defense) {\r\n            zepetoPlayer.character.SetGesture(this._defenseGesture);\r\n           
    yield new UnityEngine_1.WaitForSeconds(2);\r\n        }\r\n        else if (playerGestureInfo.gestureIndex
    == MotionIndex.Die) {\r\n            zepetoPlayer.character.SetGesture(this._dieGesture);\r\n           
    yield new UnityEngine_1.WaitForSeconds(10);\r\n            zepetoPlayer.character.transform.GetChild(0).gameObject.SetActive(false);\r\n       
    }\r\n        else\r\n            yield new UnityEngine_1.WaitForSeconds(2);\r\n       
    zepetoPlayer.character.CancelGesture();\r\n    }\r\n    KillLog(playerKillInfo)
    {\r\n        console.log(playerKillInfo.attackerNickname + \"Killed \" + playerKillInfo.victimNickname);\r\n       
    let playerGestureInfo;\r\n        playerGestureInfo = { sessionId: playerKillInfo.victimSessionId,
    gestureIndex: MotionIndex.Die };\r\n        this.StartCoroutine(this.GestureSync(playerGestureInfo));\r\n       
    this._killLogPanel.GetKillLog(playerKillInfo);\r\n    }\r\n    ParseVector3(vector3)
    {\r\n        return new UnityEngine_1.Vector3(vector3.x, vector3.y, vector3.z);\r\n   
    }\r\n}\r\nexports.default = GameManager;\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiR2FtZU1hbmFnZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJHYW1lTWFuYWdlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLDZDQUEySTtBQUMzSSxtREFBOEM7QUFDOUMsNkVBQW1IO0FBQ25ILHVEQUFrRDtBQUNsRCxpREFBcUQ7QUFFckQsK0RBQXdEO0FBQ3hELGlEQUEwQztBQUMxQyx1REFBZ0Q7QUFhaEQsSUFBSyxXQUlKO0FBSkQsV0FBSyxXQUFXO0lBQ1osK0NBQVcsQ0FBQTtJQUNYLG1EQUFTLENBQUE7SUFDVCwyQ0FBSyxDQUFBO0FBQ1QsQ0FBQyxFQUpJLFdBQVcsS0FBWCxXQUFXLFFBSWY7QUFFRCxNQUFxQixXQUFZLFNBQVEscUNBQXFCO0lBQTlEOztRQVNZLGVBQVUsR0FBVyxDQUFDLENBQUM7UUFJdkIsaUJBQVksR0FBVyxDQUFDLENBQUM7UUFJekIsYUFBUSxHQUFHO1lBQ2YsYUFBYSxFQUFFLGVBQWU7WUFDOUIsV0FBVyxFQUFFLGFBQWE7WUFDMUIsU0FBUyxFQUFDLFdBQVc7U0FDeEIsQ0FBQztJQW9HTixDQUFDO0lBbEdHLEtBQUs7UUFDRCwyQ0FBYSxDQUFDLFFBQVEsQ0FBQyxrQkFBa0IsQ0FBQyxXQUFXLENBQUMsR0FBRyxFQUFFO1lBQ3ZELElBQUksQ0FBQyxJQUFJLEdBQUcseUJBQWUsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDO1lBQzFDLElBQUksQ0FBQyxZQUFZLEdBQUcsMkNBQWEsQ0FBQyxRQUFRLENBQUMsV0FBVyxDQUFDLFlBQVksQ0FBQyxTQUFTLENBQUM7WUFDOUUsSUFBSSxDQUFDLFNBQVMsR0FBRyx3QkFBVSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxZQUFZLFNBQUMsdUJBQU0sRUFBYSxDQUFDO1lBQzlFLElBQUksQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxHQUFHLEVBQUU7Z0JBQ3BDLElBQUksQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLEtBQUss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","assetPath":"Assets/ZepetoScripts/Game/GameManager.ts","manifest":{"properties":[{"assembly":"UnityEngine.AnimationModule","name":"_punchGesture","type":"UnityEngine.AnimationClip","isArray":false,"initValue":[],"enumKeys":[],"enumValues":[],"attributes":[{"name":"SerializeField","args":[]}]},{"assembly":"UnityEngine.AnimationModule","name":"_defenseGesture","type":"UnityEngine.AnimationClip","isArray":false,"initValue":[],"enumKeys":[],"enumValues":[],"attributes":[{"name":"SerializeField","args":[]}]},{"assembly":"UnityEngine.AnimationModule","name":"_dieGesture","type":"UnityEngine.AnimationClip","isArray":false,"initValue":[],"enumKeys":[],"enumValues":[],"attributes":[{"name":"SerializeField","args":[]}]},{"assembly":"","name":"room","type":"ZEPETO.Multiplay.Room","isArray":false,"initValue":[],"enumKeys":[],"enumValues":[],"attributes":[]}],"name":"GameManager","description":""},"isCompiled":true}'
  typescriptHash: 0f965c8da9beb896f07657a25af595af
  onlyWriteTrigger: 0
